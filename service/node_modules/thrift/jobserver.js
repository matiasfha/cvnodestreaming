var thrift = require('thrift');

var JobExchange = require('./examples/gen-nodejs/JobExchange.js'),
    ttypes = require('./examples/gen-nodejs/scheduler_types');

var server = thrift.createServer(JobExchange, {
  insert_job: function(job, callback) {
    // job is an instance of ttypes.Job
    callback(1);
  },

  get_job: function(jid, callback) {
    callback(new ttypes.Job());
  },

  get_all: function(callback) {
    callback([new ttypes.Job({})]);
  }
});

server.listen(9160);
