var http = require('http');

var start = Date.now();

var stream = http.createClient(80, 'google.com');


stream.on('timeout', function() {
  console.error('timeout:', Date.now() - start);
  stream.end();
});

stream.on('connect', function() {
  console.log('connect:', Date.now() - start);
  //stream.end();
  stream.setTimeout(1);
});

var req = stream.request('GET', '/');
req.end();
req.on('response', function(res) {
  console.log('response:', Date.now() - start);
  stream.destroy();
});
